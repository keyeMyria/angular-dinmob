<div *ngIf="loading">
  <mat-spinner class="loading"></mat-spinner>
</div>

<h1 mat-dialog-title>Nuevo Usuario</h1>
<div mat-dialog-content>

  <form [formGroup]="form" (ngSubmit)="guardar()" id="id_form">

    <div class="form-group row">
      <label for="nombre" class="col-sm-3 col-form-label">Nombre</label>
      <div class="col-sm-9">
        <input class="form-control" type="text" name="nombre" id="nombre" formControlName="nombre" [ngClass]="{'is-invalid': form.get('nombre').invalid  && (form.get('nombre').dirty || form.get('nombre').touched )}">
        <div class="invalid-feedback">Proporcione un nombre</div>
      </div>
    </div>

    <div class="form-group row">
      <label for="email" class="col-sm-3 col-form-label">Email</label>
      <div class="col-sm-9">
        <input class="form-control" type="text" value="" name="email" id="email" formControlName="email" [ngClass]="{'is-invalid': form.get('email').invalid  && (form.get('email').dirty || form.get('email').touched) }">
        <div class="invalid-feedback">Proporcione un email</div>
      </div>
    </div>

    <div class="form-group row">
      <label for="id_tipo_usuario" class="col-sm-3 col-form-label">Rol</label>
      <div class="col-sm-9">
        <select class="form-control" id="id_tipo_usuario" name="id_tipo_usuario" formControlName="id_tipo_usuario" [ngClass]="{'is-invalid': form.get('id_tipo_usuario').invalid  && (form.get('id_tipo_usuario').dirty || form.get('id_tipo_usuario').touched) }">
          <option value="">Seleccionar...</option>
          <option [value]="rol.id_tipo_usuario" *ngFor="let rol of data.roles">{{rol.tipo}}</option>
        </select>
        <div class="invalid-feedback">Seleccione un rol</div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label" for="password">Password</label>
      <div class="col-sm-9">
        <input type="password" class="form-control" name="password" id="password" placeholder="" formControlName="password" [ngClass]="{'is-invalid': form.get('password').invalid  && (form.get('password').dirty || form.get('password').touched) }">
        <div class="invalid-feedback">Proporcione una contraseña</div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label" for="confirmar">Confirmar</label>
      <div class="col-sm-9">
        <input type="password" class="form-control" name="confirmar" id="confirmar" placeholder="" formControlName="confirmar" [ngClass]="{'is-invalid': form.get('confirmar').errors?.notEqual  && (form.get('confirmar').dirty || form.get('confirmar').touched) }">

        <div class="invalid-feedback">No coincide con la contraseña</div>

      </div>
    </div>

  </form>

</div>
<div mat-dialog-actions>
  <button mat-button type="button" [mat-dialog-close]="false">CERRAR</button>
  <button mat-button type="submit" form="id_form" [disabled]="form.invalid" color="primary">GUARDAR</button>

  <!-- <button type="button" mat-button (click)="debug()">debug</button> -->
</div>