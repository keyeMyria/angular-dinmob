<button mat-fab *ngIf="tab_selected=='Cliente'" (click)="guardarGenerales()" style="position:fixed; top:120px; right:20px; z-index: 10">
  <mat-icon>save</mat-icon>G
</button>

<button mat-fab *ngIf="tab_selected=='Datos laborales'" (click)="guardarLaborales()" style="position:fixed; top:120px; right:20px; z-index: 10">
  <mat-icon>save</mat-icon>L
</button>

<button mat-fab *ngIf="tab_selected=='Apoderado'" (click)="guardarApoderado()" style="position:fixed; top:120px; right:20px; z-index: 10">
  <mat-icon>save</mat-icon>A
</button>

<button mat-fab *ngIf="tab_selected=='Cónyuge'" (click)="guardarConyuge()" style="position:fixed; top:120px; right:20px; z-index: 10">
  <mat-icon>save</mat-icon>C
</button>

<button mat-fab *ngIf="tab_selected=='Inmueble'" (click)="guardarInmueble()" style="position:fixed; top:120px; right:20px; z-index: 10">
  <mat-icon>save</mat-icon>I
</button>

<button mat-fab *ngIf="tab_selected=='Alerta'" (click)="guardarAlerta()" style="position:fixed; top:120px; right:20px; z-index: 10">
  <mat-icon>save</mat-icon>A
</button>

<!-- backgroundColor="primary" [(selectedIndex)]="tabIndex"-->
<mat-tab-group (selectedTabChange)="onTabChange($event)">

  <!-- Datos Generales -->
  <mat-tab label="Cliente">
    <div class="container py-3">
      <form [formGroup]="formGenerales" id="id_form" >


        <!-- Persona Fisica/Moral -->
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Actividad Económica</label>
          <div class="col-sm-9">
            <select class="form-control" name="persona_moral" formControlName="persona_moral">
              <option value="0">Persona Física</option>
              <option value="1">Persona Moral</option>
            </select>
          </div>
        </div>

        <!-- Persona Fisica -->
        <div *ngIf="cliente.persona_moral === '0'">
          <div class="form-group row"> <!-- [ngClass]="{'has-danger':( nombre_persona_fisica.invalid && ( nombre_persona_fisica.dirty || nombre_persona_fisica.touched ))}" -->
            <label class="col-form-label col-sm-3">Nombre completo</label>
            <div class="col-sm-9">
              <input type="text" name="nombre_persona_fisica" class="form-control" formControlName="nombre_persona_fisica"
                [required]="cliente.persona_moral === '0'">
              <!--  <div *ngIf="nombrePersonaFisica.errors.required" class="form-control-feedback">Escriba un nombre</div> -->
            </div>
          </div>
          <!-- <div> nombre persona fisica: {{nombre_persona_fisica.errors|json}} </div> -->

          <div class="form-group row">
            <label class="col-form-label col-sm-3">Nacionalidad</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="nacionalidad_persona_fisica" formControlName="nacionalidad_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Lugar de nacimiento</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="lugar_nacimiento_persona_fisica" formControlName="lugar_nacimiento_persona_fisica">
            </div>
          </div>
          <!-- <div class="form-group row">
                      <label class="col-form-label col-sm-3">Fecha de nacimiento</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control" name="fecha_nacimiento_persona_fisica" formControlName="fecha_nacimiento_persona_fisica"
                          date-picker>
                      </div>
                    </div> -->

          <div class="form-group row">
            <label class="col-form-label col-sm-3" for="fecha_nacimiento_persona_fisica">Fecha de nacimiento</label>
            <div class="col-sm-9">
              <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_nacimiento_persona_fisica" id="fecha_nacimiento_persona_fisica"
                  formControlName="fecha_nacimiento_persona_fisica" [matDatepicker]="dpFechaNacimientoPF" (ngModelChange)="onFechaChange()">
                <span class="input-group-btn">
                  <button class="btn btn-secondary" type="button" (click)="dpFechaNacimientoPF.open()">
                    <i class="fa fa-calendar"></i>
                  </button>
                </span>
              </div>
              <mat-datepicker touchUi="true" #dpFechaNacimientoPF></mat-datepicker>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-form-label col-sm-3">País de nacimiento</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="pais_nacimiento_persona_fisica" formControlName="pais_nacimiento_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Lugar de residencia</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="lugar_residencia_persona_fisica" formControlName="lugar_residencia_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Domicilio Particular</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="domicilio_persona_fisica" formControlName="domicilio_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">C.P.</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="cp_persona_fisica" formControlName="cp_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Ciudad</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="ciudad_persona_fisica" formControlName="ciudad_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Teléfono particular</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="telefono_persona_fisica" formControlName="telefono_persona_fisica"
                ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Número de celular</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="celular_persona_fisica" formControlName="celular_persona_fisica"
                ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Correo eletrónico</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="email_persona_fisica" formControlName="email_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Identificación oficial</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="identificacion_oficial_persona_fisica" formControlName="identificacion_oficial_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Número de identificación</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="num_identificacion_persona_fisica" formControlName="num_identificacion_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">RFC</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskRFC}" type="text" class="form-control" name="rfc_persona_fisica" formControlName="rfc_persona_fisica"
                ui-mask="****-999999-***" ui-mask-placeholder ui-mask-placeholder-char="_">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">CURP</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskCURP}" type="text" class="form-control" name="curp_persona_fisica" formControlName="curp_persona_fisica"
                ui-mask="****-999999-A-AA-***-*9" ui-mask-placeholder ui-mask-placeholder-char="_">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Estado civil</label>
            <div class="col-sm-9">
              <select class="form-control" name="estado_civil_persona_fisica" formControlName="estado_civil_persona_fisica">
                <option value="0">Soltero</option>
                <option value="1">Casado</option>
              </select>

            </div>
          </div>
          <div class="form-group row" *ngIf="cliente.estado_civil_persona_fisica === '1'">
            <label class="col-form-label col-sm-3">Régimen</label>
            <div class="col-sm-9">
              <select class="form-control" name="regimen_conyugal_persona_fisica" formControlName="regimen_conyugal_persona_fisica">
                <option value="0">Separación de Bienes</option>
                <option value="1">Sociedad Conyugal</option>
              </select>
            </div>
          </div>
          <!-- Domicilio Fiscal persona fisica -->
          <h4 class="">Domicilio Fiscal</h4>
          <hr>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Calle</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_calle_persona_fisica" formControlName="df_calle_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Núm. Exterior</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_num_exterior_persona_fisica" formControlName="df_num_exterior_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Núm. Interior</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_num_interior_persona_fisica" formControlName="df_num_interior_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Colonia</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_colonia_persona_fisica" formControlName="df_colonia_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">C.P.</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="df_cp_persona_fisica" formControlName="df_cp_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Localidad</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_localidad_persona_fisica" formControlName="df_localidad_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Municipio</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_municipio_persona_fisica" formControlName="df_municipio_persona_fisica">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Estado</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_estado_persona_fisica" formControlName="df_estado_persona_fisica">
            </div>
          </div>

        </div>

        <!-- Persona Moral -->
        <div *ngIf="cliente.persona_moral === '1'">
          <div class="form-group row" [ngClass]="{'has-danger':(razon_social_persona_moral.$touched)}">
            <label class="col-form-label col-sm-3">Razón social</label>
            <div class="col-sm-9">
              <input #razon_social_persona_moral type="text" name="razon_social_persona_moral" class="form-control" formControlName="razon_social_persona_moral"
                [required]="cliente.persona_moral === '1'">
              <!-- <div *ngIf="razon_social_persona_moral.errors.required" class="form-control-feedback">Escriba un nombre</div>           -->
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Nacionalidad</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="nacionalidad_persona_moral" formControlName="nacionalidad_persona_moral">
            </div>
          </div>
          <!--   <div class="form-group row">
                      <label class="col-form-label col-sm-3">Fecha de constitución</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control" name="fecha_constitucion_persona_moral" formControlName="fecha_constitucion_persona_moral"
                          date-picker>
                      </div>
                    </div> -->
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Fecha de constitución</label>
            <div class="col-sm-9">
              <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_constitucion_persona_moral" id="fecha_constitucion_persona_moral"
                  formControlName="fecha_constitucion_persona_moral" [matDatepicker]="dpFechaConstitucion" (ngModelChange)="onFechaChange()">
                <span class="input-group-btn">
                  <button class="btn btn-secondary" type="button" (click)="dpFechaConstitucion.open()">
                    <i class="fa fa-calendar"></i>
                  </button>
                </span>
              </div>
              <mat-datepicker touchUi="true" #dpFechaConstitucion></mat-datepicker>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Actividad o giro mercantil</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="actividad_persona_moral" formControlName="actividad_persona_moral">
            </div>
          </div>

          <div class="form-group row">
            <label class="col-form-label col-sm-3">Número de teléfono</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="telefono_persona_moral" formControlName="telefono_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Correo electrónico</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="email_persona_moral" formControlName="email_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">RFC</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskRFCM}" type="text" class="form-control" name="rfc_persona_moral" formControlName="rfc_persona_moral"
                ui-mask="***-999999-***" ui-mask-placeholder ui-mask-placeholder-char="_">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Apoderado legal</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="apoderado_legal_persona_moral" formControlName="apoderado_legal_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Instrumento público</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="instrumento_publico_persona_moral" formControlName="instrumento_publico_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Poderes del representante legal</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="poderes_representante_persona_moral" formControlName="poderes_representante_persona_moral">
            </div>
          </div>

          <!-- Domicilio Fiscal persona moral -->
          <h4 class="box-title">Domicilio Fiscal</h4>
          <hr>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Calle</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_calle_persona_moral" formControlName="df_calle_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Núm. Exterior</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_num_exterior_persona_moral" formControlName="df_num_exterior_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Núm. Interior</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_num_interior_persona_moral" formControlName="df_num_interior_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Colonia</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_colonia_persona_moral" formControlName="df_colonia_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">C.P.</label>
            <div class="col-sm-9">
              <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="df_cp_persona_moral" formControlName="df_cp_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Localidad</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_localidad_persona_moral" formControlName="df_localidad_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Municipio</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_municipio_persona_moral" formControlName="df_municipio_persona_moral">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Estado</label>
            <div class="col-sm-9">
              <input type="text" class="form-control" name="df_estado_persona_moral" formControlName="df_estado_persona_moral">
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="text-center">
            <button mat-raised-button type="button" color="primary">GUARDAR GENERALES</button>
          </div>
        </div>
      </form>
    </div>
  </mat-tab>

  <!-- Datos Laborales -->
  <mat-tab label="Datos laborales" *ngIf="cliente.persona_moral === '0'">

    <div class="container py-3">

      <div class="form-group row">
        <label class="col-form-label col-sm-3">Profesión</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="profesion_laboral" [(ngModel)]="cliente.profesion_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Ocupación</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="ocupacion_laboral" [(ngModel)]="cliente.ocupacion_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Empresa</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="empresa_laboral" [(ngModel)]="cliente.empresa_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Puesto</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="puesto_laboral" [(ngModel)]="cliente.puesto_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Jefe inmediato</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="jefe_inmediato_laboral" [(ngModel)]="cliente.jefe_inmediato_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Giro de la empresa</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="giro_empresa_laboral" [(ngModel)]="cliente.giro_empresa_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Domicilio de la empresa</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="domicilio_empresa_laboral" [(ngModel)]="cliente.domicilio_empresa_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Código postal</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="cp_laboral" [(ngModel)]="cliente.cp_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Ciudad</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="ciudad_laboral" [(ngModel)]="cliente.ciudad_laboral">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Teléfono</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="telefono_laboral" [(ngModel)]="cliente.telefono_laboral"
            ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>


      <div class="form-group">
        <div class="text-center">
          <button mat-raised-button type="button" color="primary">GUARDAR LABORALES</button>
        </div>
      </div>



    </div>
  </mat-tab>

  <!-- Conyuge -->
  <mat-tab label="Cónyuge" *ngIf="cliente.persona_moral === '0' && cliente.regimen_conyugal_persona_fisica === '1'">
    <div class="container py-3">

      <div class="form-group row">
        <label class="col-form-label col-sm-3">Nombre completo</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="nombre_conyuge" [(ngModel)]="cliente.nombre_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Nacionalidad</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="nacionalidad_conyuge" [(ngModel)]="cliente.nacionalidad_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Lugar de nacimiento</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="lugar_nacimiento_conyuge" [(ngModel)]="cliente.lugar_nacimiento_conyuge">
        </div>
      </div>
      <!--  <div class="form-group row">
                    <label class="col-form-label col-sm-3">Fecha de nacimiento</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="fecha_nacimiento_conyuge" [(ngModel)]="cliente.fecha_nacimiento_conyuge"
                        date-picker>
                    </div>
                  </div> -->
      <div class="form-group row">
        <label class="col-form-label col-sm-3" for="fecha_nacimiento_conyuge">Fecha de nacimiento</label>
        <div class="col-sm-9">
          <div class="input-group">
            <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_nacimiento_conyuge" id="fecha_nacimiento_conyuge"
              [(ngModel)]="cliente.fecha_nacimiento_conyuge" [matDatepicker]="dpFechaNacimientoConyugue" (ngModelChange)="onFechaChange()">
            <span class="input-group-btn">
              <button class="btn btn-secondary" type="button" (click)="dpFechaNacimientoConyugue.open()">
                <i class="fa fa-calendar"></i>
              </button>
            </span>
          </div>
          <mat-datepicker touchUi="true" #dpFechaNacimientoConyugue></mat-datepicker>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">País de nacimiento</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="pais_nacimiento_conyuge" [(ngModel)]="cliente.pais_nacimiento_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Lugar de residencia</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="lugar_residencia_conyuge" [(ngModel)]="cliente.lugar_residencia_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Domicilio particular</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="domicilio_conyuge" [(ngModel)]="cliente.domicilio_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Código postal</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="cp_conyuge" [(ngModel)]="cliente.cp_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Ciudad</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="ciudad_conyuge" [(ngModel)]="cliente.ciudad_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Teléfono particular</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="telefono_conyuge" [(ngModel)]="cliente.telefono_conyuge"
            ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Teléfono celular</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="celular_conyuge" [(ngModel)]="cliente.celular_conyuge"
            ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Correo electrónico</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="email_conyuge" [(ngModel)]="cliente.email_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Identificación oficial</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="identificacion_oficial_conyuge" [(ngModel)]="cliente.identificacion_oficial_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">RFC</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskRFC}" type="text" class="form-control" name="rfc_conyuge" [(ngModel)]="cliente.rfc_conyuge"
            ui-mask="****-999999-***" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">CURP</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskCURP}" type="text" class="form-control" name="curp_conyuge" [(ngModel)]="cliente.curp_conyuge"
            ui-mask="****-999999-A-AA-***-*9" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>

      <!-- Domicilio Fiscal conyuge -->

      <h4 class="">Domicilio Fiscal</h4>
      <hr>

      <div class="form-group row">
        <label class="col-form-label col-sm-3">Calle</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="df_calle_conyuge" [(ngModel)]="cliente.df_calle_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Núm. Exterior</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="df_num_exterior_conyuge" class="form-control" [(ngModel)]="cliente.df_num_exterior_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Núm. Interior</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="df_num_interior_conyuge" [(ngModel)]="cliente.df_num_interior_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Colonia</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="df_colonia_conyuge" [(ngModel)]="cliente.df_colonia_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">C.P.</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="df_cp_conyuge" [(ngModel)]="cliente.df_cp_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Localidad</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="df_localidad_conyuge" [(ngModel)]="cliente.df_localidad_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Municipio</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="df_municipio_conyuge" [(ngModel)]="cliente.df_municipio_conyuge">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Estado</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="df_estado_conyuge" [(ngModel)]="cliente.df_estado_conyuge">
        </div>
      </div>

      <div class="form-group">
        <div class="text-center">
          <button mat-raised-button type="button" color="primary">GUARDAR CÓNYUGE</button>
        </div>
      </div>


    </div>
  </mat-tab>

  <!-- Apoderado Legal -->
  <mat-tab label="Apoderado" *ngIf="cliente.persona_moral === '1'">
    <div class="container py-3">

      <div class="form-group row">
        <label class="col-form-label col-sm-3">Nombre completo</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="nombre_apoderado" [(ngModel)]="cliente.nombre_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Nacionalidad</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="nacionalidad_apoderado" [(ngModel)]="cliente.nacionalidad_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Lugar de nacimiento</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="lugar_nacimiento_apoderado" [(ngModel)]="cliente.lugar_nacimiento_apoderado">
        </div>
      </div>
      <!--  <div class="form-group row">
                    <label class="col-form-label col-sm-3">Fecha de nacimiento</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" name="fecha_nacimiento_apoderado" [(ngModel)]="cliente.fecha_nacimiento_apoderado"
                        date-picker>
                    </div>
                  </div> -->
      <div class="form-group row">
        <label class="col-form-label col-sm-3" for="fecha_nacimiento_apoderado">Fecha de nacimiento</label>
        <div class="col-sm-9">
          <div class="input-group">
            <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_nacimiento_apoderado" id="fecha_nacimiento_apoderado"
              [(ngModel)]="cliente.fecha_nacimiento_apoderado" [matDatepicker]="dpFechaNacimientoApoderado" (ngModelChange)="onFechaChange()">
            <span class="input-group-btn">
              <button class="btn btn-secondary" type="button" (click)="dpFechaNacimientoApoderado.open()">
                <i class="fa fa-calendar"></i>
              </button>
            </span>
          </div>
          <mat-datepicker touchUi="true" #dpFechaNacimientoApoderado></mat-datepicker>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">País de nacimiento</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="pais_nacimiento_apoderado" [(ngModel)]="cliente.pais_nacimiento_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Lugar de residencia</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="lugar_residencia_apoderado" [(ngModel)]="cliente.lugar_residencia_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Domicilio particular</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="domicilio_apoderado" [(ngModel)]="cliente.domicilio_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Código postal</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="cp_apoderado" [(ngModel)]="cliente.cp_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Ciudad</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="ciudad_apoderado" [(ngModel)]="cliente.ciudad_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Teléfono particular</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="telefono_apoderado" [(ngModel)]="cliente.telefono_apoderado"
            ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Número de celular</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskPhone}" type="text" class="form-control" name="celular_apoderado" [(ngModel)]="cliente.celular_apoderado"
            ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Correo eletrónico</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="email_apoderado" [(ngModel)]="cliente.email_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Identificación oficial</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="identificacion_oficial_apoderado" [(ngModel)]="cliente.identificacion_oficial_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">Número de identificación</label>
        <div class="col-sm-9">
          <input type="text" class="form-control" name="num_identificacion_apoderado" [(ngModel)]="cliente.num_identificacion_apoderado">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">RFC</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskRFC}" type="text" class="form-control" name="rfc_apoderado" [(ngModel)]="cliente.rfc_apoderado"
            ui-mask="****-999999-***" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-form-label col-sm-3">CURP</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: maskCURP}" type="text" class="form-control" name="curp_apoderado" [(ngModel)]="cliente.curp_apoderado"
            ui-mask="****-999999-A-AA-***-*9" ui-mask-placeholder ui-mask-placeholder-char="_">
        </div>
      </div>

      <div class="form-group">
        <div class="text-center">
          <button mat-raised-button type="button" color="primary">GUARDAR APODERADO</button>
        </div>
      </div>


    </div>
  </mat-tab>

  <!-- <Documentos> -->
  <mat-tab label="Documentos">

    <div class="container py-3">


      <div class="table-responsive">
        <table class="table table-striped table-hover table-sm table-align-middle">
          <thead>
            <tr>
              <th>Titular</th>
              <th class="text-right">
                <button mat-icon-button (click)="agregarDocumento()">
                  <mat-icon>add</mat-icon>
                </button>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let doc of documentos_cliente">
              <td>
                <a class="no-decoration" href="" target="_blank">{{doc.nombre}}</a>
              </td>
              <td class="text-right">
                <button mat-button class="no-min" (click)="editarDocumento(doc)">
                  <i class="fa fa-pencil"></i>
                </button>
                <button mat-button class="no-min" (click)="delDocumento(doc)">
                  <i class="fa fa-times"></i>
                </button>
              </td>
            </tr>
            <tr *ngIf="documentos_cliente.length === 0">
              <td colspan="2" class="text-center">Ningún documento encontrado</td>
            </tr>
          </tbody>
        </table>
      </div>



      <div class="table-responsive">
        <table class="table table-striped table-hover table-sm table-align-middle mt-3">
          <thead>
            <tr>
              <th>Cónyuge</th>
              <th class="text-right">
                <button mat-icon-button (click)="agregarDocumento()">
                  <mat-icon>add</mat-icon>
                </button>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let doc of documentos_conyuge">
              <td>
                <a class="no-decoration" href="" target="_blank">{{doc.nombre}}</a>
              </td>
              <td class="text-right">
                <button mat-button class="no-min" (click)="editarDocumento(doc)">
                  <i class="fa fa-pencil"></i>
                </button>
                <button mat-button class="no-min" (click)="delLote(manzana,lote, $event)">
                  <i class="fa fa-times"></i>
                </button>
              </td>
            </tr>
            <tr *ngIf="documentos_conyuge.length === 0">
              <td colspan="2" class="text-center">Ningún documento encontrado</td>
            </tr>
          </tbody>
        </table>
      </div>



    </div>
  </mat-tab>

  <!-- <Inmueble> -->
  <mat-tab label="Inmueble">
    <div class="container py-3">
      <!-- Compras -->
      <div class="table-responsive">
        <table class="table table-striped table-hover table-align-middle table-striped mb-4">
          <thead>
            <tr>
              <th style="width:56px"></th>
              <th>Lote</th>
              <th>Estado</th>
              <th>Activación</th>
              <th>Cancelación</th>
              <th class="text-right" style="width:66px">
                <button mat-icon-button (click)="nuevaCompra()">
                  <mat-icon>add</mat-icon>
                </button>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let compra of compras" class="pointer" (click)="selectCompra(compra)" [ngClass]="{'table-primary':selection.isSelected(compra)}">
              <td style="overflow: visible">
                <!-- <mat-icon>{{ compra.selected?'check_box':'check_box_outline_blank'}}</mat-icon> -->
                <mat-checkbox class="pl-2" (click)="$event.stopPropagation()" (change)="$event ? selectCompra(compra) : null" [checked]="selection.isSelected(compra)"></mat-checkbox>
              </td>
              <td class="ws-nowrap">{{compra.obra + " / " + compra.manzana + " / "}}
                <strong>{{compra.lote}}</strong>
              </td>
              <td>{{compra.activo|numberToYesNo:'AC'}}</td>
              <td class="ws-nowrap">{{compra.fecha_activo| date:'mediumDate':'':'es'}}</td>
              <td class="ws-nowrap">{{compra.fecha_cancelacion| date:'mediumDate':'':'es'}}</td>
              <td class="text-right">
                <!--  <button type="button" class="btn btn-default btn-sm" (click)="cancelarAsociacion(compra, $event)">{{compra.activo}}</button>
                            <button type="button" class="btn btn-default btn-sm">Eliminar</button>
                            <button type="button" class="btn btn-default btn-sm">Reporte</button>
                            <button type="button" title="Ir a lote" class="btn btn-default btn-sm" ui-sref="^.ventas_lote({id_lote:compra.id_lote})">
                              <span class="fa fa-home"></span>
                            </button> -->
                <button mat-icon-button [matMenuTriggerFor]="menu3" (click)="$event.stopPropagation()">
                  <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu3="matMenu">
                  <button mat-menu-item>
                    <mat-icon>cancel</mat-icon>
                    <span>Cancelar</span>
                  </button>
                  <button mat-menu-item (click)="delLote(compra)">
                    <mat-icon>delete</mat-icon>
                    <span>Eliminar</span>
                  </button>
                  <button mat-menu-item (click)="reporteAsociacion(compra, $event)">
                    <mat-icon>report</mat-icon>
                    <span>Reporte</span>
                  </button>
                  <button mat-menu-item (click)="irLote(compra)">
                    <mat-icon>assignment_late</mat-icon>
                    <span>Ir a Lote</span>
                  </button>

                </mat-menu>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <button class="btn btn-outline-dark" (click)="showSelection()">show selection</button>

      <!-- <div class="text-center margin-bottom">
        <button type="button" class="btn btn-secondary" (click)="nuevaCompra()">Nueva Compra</button>
      </div>

      <br> -->



      <div class="form-group row">
        <label class="col-form-label col-sm-3">Estado Lote</label>
        <div class="col-sm-9">
          <div class="input-group">
            <select class="form-control">
              <option *ngFor="let estado of estados" [value]="estado.id_estado_lote">{{estado.descripcion}}</option>
            </select>
            <div class="input-group-btn">
              <button type="button" class="btn btn-secondary" (click)="actualizarEstadoLote(compra_selected)">Actualizar</button>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group row">
        <label class="col-form-label col-sm-3" for="fecha_estado">Fecha Estado</label>
        <div class="col-sm-9">
          <div class="input-group">
            <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_estado" id="fecha_estado" [matDatepicker]="dpFechaEstado"
              (ngModelChange)="onFechaChange()">
            <span class="input-group-btn">
              <button class="btn btn-secondary" type="button" (click)="dpFechaEstado.open()">
                <i class="fa fa-calendar"></i>
              </button>
            </span>
          </div>
          <mat-datepicker touchUi="true" #dpFechaEstado></mat-datepicker>
        </div>
      </div>

      <div class="form-group row">
        <label for="" class="col-form-label col-sm-3">Precio de Lista</label>
        <div class="col-sm-9">
          <input [textMask]="{mask: numbermask}" type="text" class="form-control">
        </div>
      </div>


      <fieldset [disabled]="selection.isEmpty()">
        <!-- [disabled]="!compra_selected.id_cliente" -->
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Proyecto</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" name="proyecto" [(ngModel)]="compra_selected.proyecto">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Desarrollador</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" name="desarrollador" [(ngModel)]="compra_selected.desarrollador">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Valor de operación</label>
          <div class="col-sm-9">
            <input [textMask]="{mask: numbermask}" type="text" class="form-control" name="valor_operacion" [(ngModel)]="compra_selected.valor_operacion">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Ubicación</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" name="ubicacion" [(ngModel)]="compra_selected.ubicacion">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Código postal</label>
          <div class="col-sm-9">
            <input [textMask]="{mask: maskCP}" type="text" class="form-control" name="cp" [(ngModel)]="compra_selected.cp">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Tipo de operación</label>
          <div class="col-sm-9">
            <select class="form-control" name="id_tipo_operacion" [(ngModel)]="compra_selected.id_tipo_operacion">
              <option [value]="">Seleccionar...</option>
              <option *ngFor="let op of tipos_operacion" [value]="op.id_tipo_operacion">{{op.descripcion}}</option>
            </select>
          </div>
        </div>

        <div class="form-group row" *ngIf="compra_selected.id_tipo_operacion === '1'">
          <label class="col-form-label col-sm-3">Institución Crédito</label>
          <div class="col-sm-9">
            <select class="form-control" name="id_institucion_credito" [(ngModel)]="compra_selected.id_institucion_credito">
              <option [value]="">Seleccionar...</option>
              <option *ngFor="let inst of instituciones_credito" [value]="inst.id_istitucion_credito">{{inst.nombre}}</option>
            </select>
          </div>
        </div>

        <div class="form-group row" *ngIf="compra_selected.id_tipo_operacion === '1' && compra_selected.id_institucion_credito === '1'">
          <label class="col-form-label col-sm-3">Banco</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" name="banco_credito" [(ngModel)]="compra_selected.banco_credito">
          </div>
        </div>
        <div class="form-group row" *ngIf="compra_selected.id_institucion_credito === '10'">
          <label class="col-form-label col-sm-3">Institución</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" name="otra_credito" [(ngModel)]="compra_selected.otra_credito">
          </div>
        </div>

        <div class="form-group row">
          <label class="col-form-label col-sm-3" for="fecha_firma_contrato">Fecha Firma Contrato</label>
          <div class="col-sm-9">
            <div class="input-group">
              <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_firma_contrato" id="fecha_firma_contrato" [matDatepicker]="dpFechaFirmaContrato"
                (ngModelChange)="onFechaChange()">
              <span class="input-group-btn">
                <button class="btn btn-secondary" type="button" (click)="dpFechaFirmaContrato.open()">
                  <i class="fa fa-calendar"></i>
                </button>
              </span>
            </div>
            <mat-datepicker touchUi="true" #dpFechaFirmaContrato></mat-datepicker>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-form-label col-sm-3" for="fecha_entrega">Fecha Entrega Contrato</label>
          <div class="col-sm-9">
            <div class="input-group">
              <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_entrega" id="fecha_entrega" [matDatepicker]="dpFechaEntrega"
                (ngModelChange)="onFechaChange()">
              <span class="input-group-btn">
                <button class="btn btn-secondary" type="button" (click)="dpFechaEntrega.open()">
                  <i class="fa fa-calendar"></i>
                </button>
              </span>
            </div>
            <mat-datepicker touchUi="true" #dpFechaEntrega></mat-datepicker>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-form-label col-sm-3">Asesor Inmobiliario</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" name="asesor_inmobiliario" [(ngModel)]="compra_selected.asesor_inmobiliario">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-form-label col-sm-3">Asesor</label>
          <div class="col-sm-9">
            <select class="form-control" name="id_asesor" [(ngModel)]="compra_selected.id_asesor">
              <option [value]="">Seleccionar...</option>
              <option *ngFor="let a of asesores" [value]="a.value">{{a.text}}</option>
            </select>
          </div>
        </div>
        <div class="form-group row" *ngIf="compra_selected.id_estado_venta === '5'">
          <label class="col-form-label col-sm-3">Datos de Firma</label>
          <div class="col-sm-9">
            <textarea class="form-control" rows="6" name="notas_escrituracion" [(ngModel)]="compra_selected.notas_escrituracion">
                                                    </textarea>
          </div>
        </div>
        <div class="form-group row" *ngIf="compra_selected.activo === '0'">
          <label class="col-form-label col-sm-3">Motivo Cancelación</label>
          <div class="col-sm-9">
            <textarea class="form-control" rows="4" name="notas_cancelacion" [(ngModel)]="compra_selected.notas_cancelacion"></textarea>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-form-label col-sm-3" for="fecha_entrega_fisica">Fecha Entrega Física</label>
          <div class="col-sm-9">
            <div class="input-group">
              <input class="form-control" placeholder="yyyy-mm-dd" type="text" name="fecha_entrega_fisica" id="fecha_entrega_fisica" [matDatepicker]="dpFechaEntregaFisica"
                (ngModelChange)="onFechaChange()">
              <span class="input-group-btn">
                <button class="btn btn-secondary" type="button" (click)="dpFechaEntregaFisica.open()">
                  <i class="fa fa-calendar"></i>
                </button>
              </span>
            </div>
            <mat-datepicker touchUi="true" #dpFechaEntregaFisica></mat-datepicker>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-form-label col-sm-3">Comentarios Entrega Física</label>
          <div class="col-sm-9">
            <textarea class="form-control" rows="6" name="comentarios_entrega_fisica" [(ngModel)]="compra_selected.comentarios_entrega_fisica"></textarea>
          </div>
        </div>
      </fieldset>



      <div class="form-group">
        <div class="text-center">
          <button mat-raised-button type="button" (click)="actualizarCompra(compra_selected)" color="primary">GUARDAR INMUEBLE</button>
        </div>
      </div>


    </div>
  </mat-tab>

  <!-- <Esquema Pagos> -->
  <mat-tab label="Esquema Pagos">
    <div class="container py-3">

      <!-- compras -->
      <div class="table-responsive">
        <table class="table table-striped table-hover table-align-middle table-striped">
          <thead>
            <tr>
              <th></th>
              <th>Lote</th>
              <th>Estado</th>
              <th>Activación</th>
              <th>Cancelación</th>
              <th class="text-right" style="width:66px"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let compra of compras" class="pointer" (click)="selectCompra(compra)" [ngClass]="{'table-primary':selection.isSelected(compra)}">

              <td>
                <mat-checkbox class="pl-2" (click)="$event.stopPropagation()" (change)="$event ? selectCompra(compra) : null" [checked]="selection.isSelected(compra)"></mat-checkbox>
              </td>

              <td class="ws-nowrap">{{compra.obra + " / " + compra.manzana + " / "}}
                <strong>{{compra.lote}}</strong>
              </td>
              <td>{{compra.activo|numberToYesNo:'AC'}}</td>
              <td class="ws-nowrap">{{compra.fecha_activo| date:'mediumDate':'':'es'}}</td>
              <td class="ws-nowrap">{{compra.fecha_cancelacion| date:'mediumDate':'':'es'}}</td>
              <td class="text-right">
                <button mat-icon-button [matMenuTriggerFor]="menu3" (click)="$event.stopPropagation()">
                  <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu3="matMenu">
                  <button mat-menu-item (click)="cancelarAsociacion(compra, $event)">
                    <mat-icon>cancel</mat-icon>
                    <span>Cancelar</span>
                  </button>
                  <button mat-menu-item (click)="delPagos(compra)">
                    <mat-icon>delete</mat-icon>
                    <span>Eliminar</span>
                  </button>
                  <button mat-menu-item (click)="reporteAsociacion(compra, $event)">
                    <mat-icon>report</mat-icon>
                    <span>Reporte</span>
                  </button>
                </mat-menu>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- <div class="text-center margin-bottom">
        <button type="button" class="btn btn-secundary" (click)="nuevoPago()">Nuevo Pago</button>
      </div>

      <hr> -->

      <!-- totales -->
      <div class="row">

        <div class="col-12 col-sm-4 py-3">
          <div class="text-center border-right">
            <h4 class="text-primary">
              {{(compra_selected.valor_operacion|| 0) |unmaskNumber |currency }}
            </h4>
            <span>VALOR OPERACIÓN</span>
          </div>
        </div>

        <div class="col-12 col-sm-4 py-3">
          <div class="text-center border-right">
            <h4 class="text-success">
              {{totalPagosRealizados() | currency}}
            </h4>
            <span>-PAGOS REALIZADOS</span>
          </div>
        </div>

        <div class="col-12 col-sm-4 py-3">
          <div class="text-center">
            <h4 class="text-danger">
              {{saldoPendiente() | currency}}
            </h4>
            <span>=SALDO PENDIENTE</span>
          </div>
        </div>

      </div>

      <!-- pagos -->
      <div class="table-responsive">
        <table id="tablePagos" class="table table-striped table-hover table-align-middle mt-4">
          <thead>
            <tr>
              <th>Programación</th>
              <th>Pago</th>
              <th>Monto</th>
              <th>Tipo</th>
              <th>Forma</th>
              <th>Nota</th>
              <th>Validado</th>
              <th>
                <i class="fa fa-picture"></i>
              </th>
              <th class="text-right" style="width:66px">
                <button mat-icon-button (click)="nuevoPago()" [disabled]="selection.isEmpty()">
                  <mat-icon>add</mat-icon>
                </button>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let pago of compra_selected.pagos">
              <td class="ws-nowrap">{{pago.fecha_programada| date:'mediumDate':'':'es'}}</td>
              <td class="ws-nowrap">{{pago.fecha_pago| date:'mediumDate':'':'es'}}</td>
              <td>{{pago.monto|currency}}</td>
              <td>{{pago.tipo_pago}}</td>
              <td>{{pago.forma_pago}}</td>
              <td>{{pago.nota}}</td>
              <td>
                <span class="badge" [ngClass]="pago.validado=='1'?'badge-success':'badge-secondary'">
                  {{pago.validado|numberToYesNo:'VAL'}}
                </span>
              </td>
              <td>
                <a target="_blank"></a>
              </td>
              <!-- *ngIf="pago.file_ficha_deposito"  -->
              <td class="text-right">
                <!--  <button type="button" class="btn btn-default btn-sm" (click)="pre_uploadFicha(pago)"><i class="glyphicon glyphicon-picture"></i></button>
                              <button type="button" class="btn btn-default btn-sm" (click)="pre_updatePago(pago)"><i class="glyphicon glyphicon-pencil"></i></button>
                              <button type="button" class="btn btn-default btn-sm" (click)="pre_eliminarPago(pago)"><i class="glyphicon glyphicon-remove"></i></button> -->
                <button mat-icon-button [matMenuTriggerFor]="menu4">
                  <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu4="matMenu">
                  <button mat-menu-item>
                    <mat-icon>attachment</mat-icon>
                    <span>Ficha</span>
                  </button>
                  <button mat-menu-item (click)="editarPago(pago)">
                    <mat-icon>create</mat-icon>
                    <span>Editar</span>
                  </button>
                  <button mat-menu-item (click)="delPago(pago)">
                    <mat-icon>delete</mat-icon>
                    <span>Eliminar</span>
                  </button>
                </mat-menu>
              </td>
            </tr>
          </tbody>
        </table>
      </div>




    </div>
  </mat-tab>

  <!-- <Alerta> -->
  <mat-tab label="Alerta">
    <div class="container py-3">
      <form [formGroup]="formAlerta" (ngSubmit)="guardarAlerta()">

        <div class="form-group">
          <mat-slide-toggle formControlName="alerta_activada">Alerta Activada</mat-slide-toggle>
        </div>

        <div class="form-group">
          <!-- <label for="mensaje_alerta" class="col-form-label">Mensaje de Alerta</label> -->
          <input class="form-control" type="text" placeholder="Mensaje" name="mensaje_alerta" id="mensaje_alerta" formControlName="mensaje_alerta">
        </div>

        <div class="form-group">
          <div class="text-center">
            <button mat-raised-button type="submit" color="primary">GUARDAR ALERTA</button>
          </div>
        </div>

      </form>



    </div>
  </mat-tab>

</mat-tab-group>